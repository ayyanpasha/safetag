datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["auth"]
}

generator client {
  provider        = "prisma-client-js"
  output          = "../../generated/prisma"
  previewFeatures = ["multiSchema"]
}

enum UserRole {
  OWNER
  DEALER
  ADMIN

  @@schema("auth")
}

model User {
  id               String   @id @default(uuid()) @db.Uuid
  phone            String   @unique
  name             String?
  email            String?
  role             UserRole @default(OWNER)
  emergencyContact String?
  dndEnabled       Boolean  @default(false)
  dndStart         String?
  dndEnd           String?
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@map("users")
  @@schema("auth")
}

model OtpCode {
  id        String   @id @default(uuid()) @db.Uuid
  phone     String
  code      String
  expiresAt DateTime
  used      Boolean  @default(false)
  createdAt DateTime @default(now())

  @@map("otp_codes")
  @@schema("auth")
}
